From d688ea362dd32b2534a56fb0bda6c0a77c5be0cf Mon Sep 17 00:00:00 2001
From: Dan McDonald <danmcd@edgecast.io>
Date: Mon, 6 Oct 2025 16:29:57 -0400
Subject: [PATCH 32/34] gcc14 fixes for illumos

---
 auth-pam.c | 6 +++++-
 scp.c      | 4 ++--
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/auth-pam.c b/auth-pam.c
index 4efb1976d..db6b8da34 100644
--- a/auth-pam.c
+++ b/auth-pam.c
@@ -69,7 +69,11 @@
 
 /* OpenGroup RFC86.0 and XSSO specify no "const" on arguments */
 #ifdef PAM_SUN_CODEBASE
-# define sshpam_const		/* Solaris, HP-UX, SunOS */
+# ifdef __illumos__
+#   define sshpam_const const	/* illumos */
+# else
+#   define sshpam_const		/* Solaris, HP-UX, SunOS */
+# endif
 #else
 # define sshpam_const	const	/* LinuxPAM, OpenPAM, AIX */
 #endif
diff --git a/scp.c b/scp.c
index c5f573cc1..d8f07b4ed 100644
--- a/scp.c
+++ b/scp.c
@@ -191,7 +191,7 @@ killchild(int signo)
 }
 
 static void
-suspone(int pid, int signo)
+suspone(pid_t pid, int signo)
 {
 	int status;
 
@@ -1001,7 +1001,7 @@ brace_expand(const char *pattern, char ***patternsp, size_t *npatternsp)
 
 static struct sftp_conn *
 do_sftp_connect(char *host, char *user, int port, char *sftp_direct,
-   int *reminp, int *remoutp, int *pidp)
+   int *reminp, int *remoutp, pid_t *pidp)
 {
 	if (sftp_direct == NULL) {
 		if (do_cmd(ssh_program, host, user, port, 1, "sftp",
-- 
2.50.1

